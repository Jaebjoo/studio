<!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <title>Jae Joo Studio Portfolio</title>
</head>

<body>

    <nav class="navbar navbar-expand navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Jae Joo :: Portfolio :: Studio 6 (2021)</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample02" aria-controls="navbarsExample02"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExample02">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="index.html">Home
                    <span class="sr-only">(current)</span>
                </a>
            </li>
            <!-- <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Azure Learn (2020)
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                <a class="dropdown-item" href="IoT.html">Azure Fundamentals</a>
                <a class="dropdown-item" href="IoT.html">Introduction to Azure IoT</a>
                <a class="dropdown-item" href="IoT.html">Introduction to Azure SQL</a>
              </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Azure Research (2020)
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="AzureIoT.html">IoT</a>
                  <a class="dropdown-item" href="AzureMariaDB.html">MariaDB</a>
                  <a class="dropdown-item" href="SQLDB.html">SQL DB</a>
                  <a class="dropdown-item" href="AzureVM.html">Azure VM</a>
                  <a class="dropdown-item" href="AzureVnet.html">Azure Vnet</a>
                  <a class="dropdown-item" href="AzureNIC.html">Azure NIC</a>
                  <a class="dropdown-item" href="AzureDevTestLabs.html">Azure DevTestLabs</a>
                  <a class="dropdown-item" href="AzurePowerShell.html">Azure Portal/PowerShell</a>
                </div>
              </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Studio5 Tasks
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="DBMigration.html">DB2/3 Migration (Krissi/Rob)</a>
                  <a class="dropdown-item" href="DBUserAdding.html">DB2/3 User Adding (Rob)</a>
                  <a class="dropdown-item" href="IoTSimulation.html">IoT Simulation (Research)</a>
                  <a class="dropdown-item" href="DesktopMaintenance.html">Desktop Maintenance (Rob)</a>
                  <a class="dropdown-item" href="LinuxConfiguration.html">Linux Configuration (Faisal)</a>
                  <a class="dropdown-item" href="ImagingCloning.html">Imaging, Cloning (Hamish)</a>
                  <a class="dropdown-item" href="SystemAudit.html">System Audit (Rob)</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Studio5 Reflection
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="S5Communication.html">Communication</a>
                  <a class="dropdown-item" href="S5Documentation.html">Documentation</a>
                  <a class="dropdown-item" href="S5TimeManagement.html">Time Management</a>
                  <a class="dropdown-item" href="S5ResearchLearning.html">Research + Learning</a>
                </div>
              </li> -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Azure Learn
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="MEANStack.html">Build a MEAN Stack Web application on Linux VM</a>
                  <a class="dropdown-item" href="AzureDevOps.html">Azure Dev Ops</a>
                  <a class="dropdown-item" href="HostWebApp.html">Host Web App with Azure App Service</a>
                  <a class="dropdown-item" href="CreateWindowsVM.html">Create a Windows VM</a>
                  <a class="dropdown-item" href="TCOCalculator.html">TCO Calculator</a>
                  <a class="dropdown-item" href="AzurePolicies.html">Restrict Deployments with Azure Policies</a>
                  <a class="dropdown-item" href="TimerTrigger.html">Timer Trigger</a>
                  <a class="dropdown-item" href="HTTPTrigger.html">HTTP Trigger</a>
                  <a class="dropdown-item" href="BlobTrigger.html">Blob Trigger</a>
                  <a class="dropdown-item" href="ResourceLocks.html">Resource Locks</a>
                  <a class="dropdown-item" href="WebsiteHostedOnAzure.html">Website Hosted on Azure</a>
                  <a class="dropdown-item" href="BindingTypes.html">Binding Types</a>
                  <a class="dropdown-item" href="InputBindings.html">Input Bindings</a>
                  <a class="dropdown-item" href="OutputBindings.html">Output Bindings</a>
                  <a class="dropdown-item" href="SQLonLinux.html">Deploy SQL Server on Linux</a>
                  <a class="dropdown-item" href="DockerContainers.html">Docker Containers</a>
                  <a class="dropdown-item" href="NetworkSecurityGroup.html">Network Security Group</a>
                  <a class="dropdown-item" href="AzureKeyVault.html">Azure Key Vault</a>
                  <a class="dropdown-item" href="SQLDatabase.html">SQL Database</a>
                  <a class="dropdown-item" href="FunctionApp.html">Function App</a>
                  <a class="dropdown-item" href="SQLonLinuxContainers.html">SQL Server on Linux Containers</a>
                  <a class="dropdown-item" href="InstallPowershell.html">Powershell</a>
                  <a class="dropdown-item" href="InstallAzureCLI.html">Azure CLI</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Azure Research
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <a class="dropdown-item" href="AF1.html">Azure Fundamentals 1</a>
                    <a class="dropdown-item" href="AF2.html">Azure Fundamentals 2</a>
                    <a class="dropdown-item" href="AF3.html">Azure Fundamentals 3</a>
                    <a class="dropdown-item" href="AF4.html">Azure Fundamentals 4</a>
                    <a class="dropdown-item" href="AF5.html">Azure Fundamentals 5</a>
                    <a class="dropdown-item" href="AF6.html">Azure Fundamentals 6</a>
                    <a class="dropdown-item" href="StaticWebApp.html">Azure Static Website App</a>
                    <a class="dropdown-item" href="DockerNetworking.html">Docker Networking</a>
                    <a class="dropdown-item" href="Bridging.html">Bridging</a>
                    <!-- <a class="dropdown-item" href="index.html">Powershell Scripts for Linux Containers</a> -->
                    <!-- <a class="dropdown-item" href="index.html">Puppet X Docker</a> -->
                    <!-- <a class="dropdown-item" href="index.html">Apache X Docker</a> -->
                    <!-- <a class="dropdown-item" href="index.html">Nagios X Docker</a> -->
                    <!-- <a class="dropdown-item" href="index.html">Azure Dev Test Labs</a> -->
                    <!-- <a class="dropdown-item" href="index.html">Azure Lab Services</a> -->
                    <!-- <a class="dropdown-item" href="index.html">...</a> -->
                  </div>
                </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Tasks
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="ICThelpdesk.html">ICT Helpsite Migration (Rob)</a>
                  <a class="dropdown-item" href="UpdatingICTHelpsite.html">ICT Helpsite Update (Rob)</a>
                  <a class="dropdown-item" href="LinuxCourseResources.html">Linux Course Resources (Faisal)</a>
                  <a class="dropdown-item" href="PCmaintenance.html">PC Maintenance (Rob)</a>
                  <!-- <a class="dropdown-item" href="index.html">Sys Admin Course Resources (Faisal)</a> -->
                  <!-- <a class="dropdown-item" href="index.html">Automation/Management Course Resources (Faisal)</a> -->
                  <!-- <a class="dropdown-item" href="index.html">Rewrite of Linux Course Lab (Faisal)</a> -->
                  <a class="dropdown-item" href="DevOpsFileOrganisation.html">DevOps Files Organisation</a>
                  <!-- <a class="dropdown-item" href="index.html">DevOps Team Induction</a> -->
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Reflections
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="S6Communication.html">Communication</a>
                  <a class="dropdown-item" href="S6Documentation.html">Documentation</a>
                  <a class="dropdown-item" href="S6TimeManagement.html">Time Management</a>
                  <a class="dropdown-item" href="S6ResearchLearning.html">Research + Learning</a>
                </div>
              </li>
        </ul>
    </div>
</nav>
<hr>
    <div class="container">
        <h2 id="studio-5-">Studio 5 :</h2>
<h1 id="linux-configuration">Linux Configuration</h1>

<h4 id="clients-requests">Client’s Requests</h4>

<p><img src="images\Linux_Configuration\0Linux Architecture.png" alt="Client Request" title="Client Request" /></p>

<p>Client requests 3 VMs connected on 3 different networks. 2 VMs connected to 1 gateway VM, connected to the internet with a public IP.</p>

<h4 id="summary">Summary</h4>

<p>3 VMs were created with 3Vnets which were peered to one of the Vnets.
VM connectivity was successful, however seperate NIs, a total of 3 needed for the gateway VM was difficult to implement and very costly.
Next step would be to try and create a virtualised environment inside the VM itself that can recreate the architecture.
Azure has limitations which are not well suited to this particular request. Azure is streamlined for a mainstream, corporate demand for virtual cloud infrastructures.</p>

<h4 id="reflection">Reflection</h4>

<ul>
  <li>I am much more comfortable with creating VMs and resizing them for a particular purpose.</li>
  <li>Networking VMs as well as different Vnets to have successful connectivity will be useful skills later on when appproaching more sophisticated architecture.</li>
  <li>I am more aware of size restrictions, NI limitations of each VM size and also the corresponding costs which may be a large burden.</li>
  <li>Theoretically, bridging on the gateway vm after attaching the NI would be possible, though I believe realistically, simply peering Vnet2 to 3 would be a easier solution.</li>
  <li>I have become more aware of the use of a gateway VM which serves to limit public connection and security against outside threats.</li>
  <li>Azure Bash shell is very responsive and allows easy access to each VM</li>
  <li>Network security can be managed at each individual level with a firewall configured within the VM as well as in the Azure portal.</li>
  <li>Overall, it was a valuable experience to learn advanced features of VMs and Networking.</li>
</ul>

<h4 id="solving-solution">Solving Solution</h4>

<p><strong>Creating VNets</strong></p>

<p>3 Vnets were created in total on Azure</p>

<p><img src="images\Linux_Configuration\1vnetList.png" alt="Vnet List" title="Vnet List" /></p>

<p>Vnet 1 was peered to Vnet 2 and 3</p>

<p><img src="images\Linux_Configuration\2vnet1peering.png" alt="Vnet 1 Peering" title="Vnet 1 Peering" /></p>

<p>Vnet 2 and 3 peered to 1</p>

<p><img src="images\Linux_Configuration\3vnet2peering.png" alt="Vnet 2 Peering" title="Vnet 2 Peering" />
<img src="images\Linux_Configuration\4vnet3peering.png" alt="Vnet 3 Peering" title="Vnet 3 Peering" /></p>

<p>VMs added to each Network</p>

<p><img src="images\Linux_Configuration\5vnet1.png" alt="VM1 Network" title="VM1 Network" />
<img src="images\Linux_Configuration\6vnet2.png" alt="VM2 Network" title="VM2 Network" />
<img src="images\Linux_Configuration\7vnet3.png" alt="VM3 Network" title="VM3 Network" /></p>

<p>Complete architecture of the networks.</p>

<p><img src="images\Linux_Configuration\5-0vnetPeering.png" alt="Networks" title="Networks" /></p>

<p>VM1 has a public ip of 104.210.108.234.
Open bash shell on Azure and connect using this ip.</p>

<p><img src="images\Linux_Configuration\8vm1ip.png" alt="VM1IP" title="VM1IP" /></p>

<p>Type in the command below and enter the password</p>

<p><img src="images\Linux_Configuration\9vm1connection.png" alt="VM1Connection" title="VM1Connection" /></p>

<p>VM2 and 3 have not been given public IPs and can only be accessed through the gateway VM</p>

<p><img src="images\Linux_Configuration\10vm2connection1.png" alt="VM2Connection" title="VM2Connection" /></p>

<p>VM2 private IP</p>

<p><img src="images\Linux_Configuration\11vm2connection2.png" alt="VM2Connection" title="VM2Connection" /></p>

<p>VM3 private IP</p>

<p><img src="images\Linux_Configuration\12vm3connection.png" alt="VM3Connection" title="VM3Connection" /></p>

<p>Use these private IPs to ssh from VM1(gateway VM).</p>

<p>Pinging to test connections to both VMs using Private IP</p>

<p><img src="images\Linux_Configuration\13vm2ping.png" alt="VM2 Ping" title="VM2 Ping" />
<img src="images\Linux_Configuration\14vm3ping.png" alt="VM3 Ping" title="VM3 Ping" /></p>

<p>ssh to VM2 using private ip</p>

<p><img src="images\Linux_Configuration\15vm2connection3.png" alt="VM2 SSH" title="VM2 SSH" /></p>

<p>VM1 also has a private VM, ping testing from VM2 to VM1 is successful, however you cannot ping from VM2 directly to VM3.
A simple peering from Vnet2 &lt;&gt; Vnet 3 would solve this issue, however the client requests a bridge be used on VM1 to have connection.</p>

<p><img src="images\Linux_Configuration\16vm1privateip.png" alt="VM1 Private IP" title="VM1 Private IP" /></p>

<p><img src="images\Linux_Configuration\17vm1ping.png" alt="VM1 Ping Success" title="VM1 Ping Success" /></p>

<p><img src="images\Linux_Configuration\18vm3pingfail.png" alt="VM3 Ping Fail" title="VM3 Ping Fail" /></p>

<p>With the network topology completed, additional NICs should be attached to complete the configurations.</p>

<p>NICs can be added in the Networking section of the “Settings”</p>

<p><img src="images\Linux_Configuration\19vmnetworking.png" alt="VM Networking" title="VM Networking" /></p>

<p>New Network interface can be created and attached to the VM</p>

<p><img src="images\Linux_Configuration\33vmnicdiagram.png" alt="VM NIC Diagram" title="VM NIC Diagram" /></p>

<p><img src="images\Linux_Configuration\20vmnic.png" alt="VM NIC" title="VM NIC" /></p>

<p><img src="images\Linux_Configuration\21vmnicattach.png" alt="VM NIC Attach" title="VM NIC Attach" /></p>

<p><img src="images\Linux_Configuration\22nicadding.png" alt="VM NIC Adding" title="VM NIC Adding" /></p>

<p><img src="images\Linux_Configuration\23nicattached.png" alt="VM NIC Attached" title="VM NIC Attached" /></p>

<p>However when a second network interface is added and attaching is attempted, it fails. Particular Azure VMs have a resstriction on the number of NI allowed. The maximum on the VMs on this try allowed only 2.</p>

<p><img src="images\Linux_Configuration\24nicadding2.png" alt="VM NIC Adding Fail" title="VM NIC Adding Fail" /></p>

<p><img src="images\Linux_Configuration\25nicaddingfail.png" alt="VM NIC Adding Fail" title="VM NIC Adding Fail" /></p>

<p>NI have their own individual public and private IPs.</p>

<p><img src="images\Linux_Configuration\26nic1ip.png" alt="VM NIC IP" title="VM NIC IP" /></p>

<p><img src="images\Linux_Configuration\27nic2ip.png" alt="VM NIC IP" title="VM NIC IP" /></p>

<p>These can be seen within the VM with the ‘ ip a ‘ command.</p>

<p><img src="images\Linux_Configuration\28nicipinvm.png" alt="VM NIC IPs" title="VM NIC IP" /></p>

<p>The size of a VM can be adjusted on the size section of settings</p>

<p><img src="images\Linux_Configuration\29changingvmsize.png" alt="VM Size" title="VM Size" /></p>

<p>https://github.com/uglide/azure-content/blob/master/articles/virtual-network/virtual-networks-multiple-nics.md</p>

<p>A github article about the VM sizes can be seen in the link above</p>

<p>A comprehensive list of the number of NIC that can be attached to each VM size is available here.</p>

<p><img src="images\Linux_Configuration\34nictable.png" alt="VM NIC capacity" title="VM NIC capacity" /></p>

<p><img src="images\Linux_Configuration\29changingvmsize.png" alt="VM Size" title="VM Size" /></p>

<p><img src="images\Linux_Configuration\30changingvmsize2.png" alt="VM Size" title="VM Size" /></p>

<p>There may be restrictions on the available VMs based on which region you have established your infrastructure. Costs are also a very significant factor when considering a size upgrade. The A4 which was the final solution to this problem costs +200 Dollars per month.</p>

<p>This was a critical feasibility issue and a new solution had to be found.</p>

<p>However the A4 was able to have 3 different NIC as requested.</p>

<p><img src="images\Linux_Configuration\31nicnewsize.png" alt="VM New Size" title="VM New Size" /></p>


    </div>

    <hr>

<footer>
    <div class="container"></div>
</footer>

</body>

</html>